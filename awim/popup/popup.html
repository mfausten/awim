<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <style>
      p { width: 50px; height: 50px; border: 1px solid #000; }
    </style>
  </head>

  <body>
    <div class="beast">Frog</div>
    <div class="beast">Turtle</div>
    <div class="beast">Snake</div>

    <p>foo bar baz</p>
    
    <script type="text/javascript">
    document.addEventListener("click", function(e) {
      browser.tabs.query({}, function(result){
        console.log(result);
        result.forEach(function(value, index){
          if(value.url.startsWith('https://www.youtube.com')){
            console.log('found youtube tab');
            console.log(value);
            console.log('execute script');
            browser.tabs.executeScript(value.id, { file: "/content_scripts/stop.js" }, function(result){console.log('received result!');console.log(result);})
            console.log('send message')
            browser.tabs.sendMessage(value.id, {});
            console.log('done');
          }
        });
      });
      /*console.log('click received');
      chrome.tabs.executeScript(null, {
        file: "/content_scripts/stop.js"
      });

      var chosenBeastURL = 'foo';
  
      chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {
        console.log(tabs);
        console.log(tabs[0].id);
        chrome.tabs.sendMessage(tabs[0].id, {beastURL: chosenBeastURL});
      });*/

    });
    
    </script>
    
  </body>

</html>